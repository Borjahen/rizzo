import ProductMapper from "../resources/product/mapper";
import { IPoi } from "../resources/poi";

describe("ProductMapper", () => {
  it("should map a shop product entry to a product model", () => {
    const mapper = new ProductMapper();
    const now = new Date().getTime();

    const model = mapper.toModel({
      type: "product",
      id: "7a7d35f8-18d8-41e4-9a87-2df21abe512b",
      attributes: {
        authors: [],
        category: "City Guide",
        descriptions: {
          long_description: "<p><b>Lonely Planet’s <i>Barcelona </i></b>is your passport to the most relevant, up-to-date advice on what to see and skip, and what hidden discoveries await you. Savour the best of New Catalan cuisine, yell for your team at Camp Nou stadium, and crane your neck at the weird and wonderful architecture of La Sagrada Familia – all with your trusted travel companion. Get to the heart of Barcelona and begin your journey now!</p><p>Inside <b>Lonely Planet’s <i>Barcelona</i></b>:</p><ul><li><b>Colour </b>maps and images throughout</li><li><b>Highlights </b><b>and itineraries</b> help you tailor your trip to your personal needs and interests</li><li><b>Insider tips</b> to save time and money and get around like a local, avoiding crowds and trouble spots</li><li><b>Essential info </b><b>at your fingertips</b> - hours of operation, phone numbers, websites, transit tips, prices</li><li><b>Honest reviews for all budgets</b> - eating, sleeping, sightseeing, going out, shopping, hidden gems that most guidebooks miss</li><li><b>Cultural insights</b> provide a richer, more rewarding travel experience - covering history, people, music, cuisine, politics</li><li><b>Over </b><b>30 maps</b> for easy navigation</li></ul><p><BR></p><p><b>Coverage Includes:</b> La Rambla, Barri Gòtic, El Raval, La Ribera, Barceloneta, La Sagrada Família, Gracia, Park Güell, Camp Nou, Pedralbes, La Zona, Montjuïc, Poble Sec, Sant Antoni, and more</p>",
          short_description: "<p><b>Lonely Planet’s <i>Barcelona </i></b>is your passport to the most relevant, up-to-date advice on what to see and skip, and what hidden discoveries await you. Savour the best of New Catalan cuisine, yell for your team at Camp Nou stadium, and crane your neck at the weird and wonderful architecture of La Sagrada Familia – all with your trusted travel companion. Get to the heart of Barcelona and begin your journey now!</p><p>Inside <b>Lonely Planet’s <i>Barcelona</i></b>:</p><ul><li><b>Colour </b>maps and images throughout</li><li><b>Highlights </b><b>and itineraries</b> help you tailor your trip to your personal needs and interests</li><li><b>Insider tips</b> to save time and money and get around like a local, avoiding crowds and trouble spots</li><li><b>Essential info </b><b>at your fingertips</b> - hours of operation, phone numbers, websites, transit tips, prices</li><li><b>Honest reviews for all budgets</b> - eating, sleeping, sightseeing, going out, shopping, hidden gems that most guidebooks miss</li><li><b>Cultural insights</b> provide a richer, more rewarding travel experience - covering history, people, music, cuisine, politics</li><li><b>Over </b><b>30 maps</b> for easy navigation</li></ul><p><BR></p><p><b>Coverage Includes:</b> La Rambla, Barri Gòtic, El Raval, La Ribera, Barceloneta, La Sagrada Família, Gracia, Park Güell, Camp Nou, Pedralbes, La Zona, Montjuïc, Poble Sec, Sant Antoni, and more</p>"
        },
        digital: false,
        edition: 11,
        images: {
          large: [
            "https://lonelyplanet-weblinc.netdna-ssl.com/product_images/lonely_planet_us/barcelona-city-guide-11/browse/5bc72451d860886ef2e1b0e1/detail.jpg?c=1539777617"
          ],
          medium: [
            "https://lonelyplanet-weblinc.netdna-ssl.com/product_images/lonely_planet_us/barcelona-city-guide-11/browse/5bc72451d860886ef2e1b0e1/medium.jpg?c=1539777617"
          ],
          original: "https://lonelyplanet-weblinc.netdna-ssl.com/product_images/lonely_planet_us/barcelona-city-guide-11/browse/5bc72451d860886ef2e1b0e1/zoom.jpg?c=1539777617",
          small: [
            "https://lonelyplanet-weblinc.netdna-ssl.com/product_images/lonely_planet_us/barcelona-city-guide-11/browse/5bc72451d860886ef2e1b0e1/small.jpg?c=1539777617"
          ]
        },
        is_bundle: false,
        is_chapter: false,
        isbn: "9781786572653",
        page_colour_count: 304,
        page_count: 304,
        page_maps_count: 37,
        pricing: [
          {
            amount: 29.989999999999998,
            currency: "AUD"
          },
          {
            amount: 18.190000000000001,
            currency: "GBP"
          },
          {
            amount: 28.59,
            currency: "USD"
          },
          {
            amount: 22.75,
            currency: "EUR"
          }
        ],
        product_type: "book",
        release_date: "2018-11-20 00:00:00.000000 UTC",
        score: 1,
        title: "Barcelona"
      },
      relationships: {
        places: {
          data: [
            {
              id: "360761",
              type: "place"
            },
            {
              id: "358537",
              type: "place"
            },
            {
              id: "360727",
              type: "place"
            }
          ],
          links: {
            related: "/places?filter[place][id][equals]=360761,358537,360727",
          }
        }
      },
      links: {
      self: "/products/1e53b4d0-89c9-4c7d-8259-bbab428db3e2",
      shop: "https://shop.lonelyplanet.com/products/barcelona-city-guide-11",
    },
    });

    expect(model.id).toEqual("7a7d35f8-18d8-41e4-9a87-2df21abe512b");
    expect(model.authors).toEqual([]);
    expect(model.category).toEqual("City Guide");
    expect(model.descriptions.longDescription).toEqual("<p><b>Lonely Planet’s <i>Barcelona </i></b>is your passport to the most relevant, up-to-date advice on what to see and skip, and what hidden discoveries await you. Savour the best of New Catalan cuisine, yell for your team at Camp Nou stadium, and crane your neck at the weird and wonderful architecture of La Sagrada Familia – all with your trusted travel companion. Get to the heart of Barcelona and begin your journey now!</p><p>Inside <b>Lonely Planet’s <i>Barcelona</i></b>:</p><ul><li><b>Colour </b>maps and images throughout</li><li><b>Highlights </b><b>and itineraries</b> help you tailor your trip to your personal needs and interests</li><li><b>Insider tips</b> to save time and money and get around like a local, avoiding crowds and trouble spots</li><li><b>Essential info </b><b>at your fingertips</b> - hours of operation, phone numbers, websites, transit tips, prices</li><li><b>Honest reviews for all budgets</b> - eating, sleeping, sightseeing, going out, shopping, hidden gems that most guidebooks miss</li><li><b>Cultural insights</b> provide a richer, more rewarding travel experience - covering history, people, music, cuisine, politics</li><li><b>Over </b><b>30 maps</b> for easy navigation</li></ul><p><BR></p><p><b>Coverage Includes:</b> La Rambla, Barri Gòtic, El Raval, La Ribera, Barceloneta, La Sagrada Família, Gracia, Park Güell, Camp Nou, Pedralbes, La Zona, Montjuïc, Poble Sec, Sant Antoni, and more</p>");
    expect(model.descriptions.shortDescription).toEqual("<p><b>Lonely Planet’s <i>Barcelona </i></b>is your passport to the most relevant, up-to-date advice on what to see and skip, and what hidden discoveries await you. Savour the best of New Catalan cuisine, yell for your team at Camp Nou stadium, and crane your neck at the weird and wonderful architecture of La Sagrada Familia – all with your trusted travel companion. Get to the heart of Barcelona and begin your journey now!</p><p>Inside <b>Lonely Planet’s <i>Barcelona</i></b>:</p><ul><li><b>Colour </b>maps and images throughout</li><li><b>Highlights </b><b>and itineraries</b> help you tailor your trip to your personal needs and interests</li><li><b>Insider tips</b> to save time and money and get around like a local, avoiding crowds and trouble spots</li><li><b>Essential info </b><b>at your fingertips</b> - hours of operation, phone numbers, websites, transit tips, prices</li><li><b>Honest reviews for all budgets</b> - eating, sleeping, sightseeing, going out, shopping, hidden gems that most guidebooks miss</li><li><b>Cultural insights</b> provide a richer, more rewarding travel experience - covering history, people, music, cuisine, politics</li><li><b>Over </b><b>30 maps</b> for easy navigation</li></ul><p><BR></p><p><b>Coverage Includes:</b> La Rambla, Barri Gòtic, El Raval, La Ribera, Barceloneta, La Sagrada Família, Gracia, Park Güell, Camp Nou, Pedralbes, La Zona, Montjuïc, Poble Sec, Sant Antoni, and more</p>");
    expect(model.edition).toEqual(11);
    expect(model.images.original).toEqual("https://lonelyplanet-weblinc.netdna-ssl.com/product_images/lonely_planet_us/barcelona-city-guide-11/browse/5bc72451d860886ef2e1b0e1/zoom.jpg?c=1539777617");
    expect(model.images.small).toEqual(["https://lonelyplanet-weblinc.netdna-ssl.com/product_images/lonely_planet_us/barcelona-city-guide-11/browse/5bc72451d860886ef2e1b0e1/small.jpg?c=1539777617"]);
    expect(model.images.medium).toEqual(["https://lonelyplanet-weblinc.netdna-ssl.com/product_images/lonely_planet_us/barcelona-city-guide-11/browse/5bc72451d860886ef2e1b0e1/medium.jpg?c=1539777617"]);
    expect(model.images.large).toEqual(["https://lonelyplanet-weblinc.netdna-ssl.com/product_images/lonely_planet_us/barcelona-city-guide-11/browse/5bc72451d860886ef2e1b0e1/detail.jpg?c=1539777617"]);
    expect(model.isBundle).toEqual(false);
    expect(model.isChapter).toEqual(false);
    expect(model.isDigital).toEqual(false);
    expect(model.isbn).toEqual("9781786572653");
    expect(model.pageColourCount).toEqual(304);
    expect(model.pageCount).toEqual(304);
    expect(model.pageMapsCount).toEqual(37);
    expect(model.pricing).toHaveLength(4);
    expect(model.pricing[0].currency).toEqual("AUD");
    expect(model.pricing[0].amount).toEqual(29.989999999999998);
    expect(model.pricing[1].currency).toEqual("GBP");
    expect(model.pricing[1].amount).toEqual(18.190000000000001);
    expect(model.pricing[2].currency).toEqual("USD");
    expect(model.pricing[2].amount).toEqual(28.59);
    expect(model.pricing[3].currency).toEqual("EUR");
    expect(model.pricing[3].amount).toEqual(22.75);
    expect(model.productType).toEqual("book");
    expect(model.releaseDate instanceof Date).toBeTruthy();
    expect(model.releaseDate.toISOString()).toEqual("2018-11-20T00:00:00.000Z");
    expect(model.score).toEqual(1);
    expect(model.shop).toEqual("https://shop.lonelyplanet.com/products/barcelona-city-guide-11");
    expect(model.title).toEqual("Barcelona");
    expect(model.containingPlaceIds).toEqual(["360761", "358537", "360727"]);
  });
});
