import * as AWS from "aws-sdk";
import { S3Uploader } from "../classes/uploader";

const s3 = new AWS.S3();
const s3Bucket = "static-asset";
const baseKey = "dotcom-core";
const version = process.argv[2];
const libDir = "lib";

const uploader = new S3Uploader();

const componentsKey = `${baseKey}/version.json`;

Promise.all([
  uploader.upload({
    key: componentsKey,
    body: JSON.stringify({
      version,
    }),
  }),
])
.then((results) => {
  // tslint:disable-next-line:no-console
  console.log(`Uploaded ${results.length} files to s3.`);
});
