#!/usr/bin/env node
require("reflect-metadata")
const program = require("commander");
const fs = require("fs");
const path = require("path");
const cli = require("../dist/classes/runtime").default;

program
.version("1.0.0")

program
  .option("-j, --json [j]", "input json file")
  .option("-p, --props [p]", "inline props")
  .description("build a component from a json file of props")
  .parse(process.argv);

const {
  json, props,
} = program;

const [component] = program.args;

let parsed;
if (json) {
  parsed = JSON.parse(fs.readFileSync(path.resolve(json)).toString());
} else {
  parsed = JSON.parse(props);
}

console.log(cli({
  component: component,
  props: parsed,
}));

// const component = args[args.indexOf("--component") + 1];
// const props = args[args.indexOf("--props") + 1]
