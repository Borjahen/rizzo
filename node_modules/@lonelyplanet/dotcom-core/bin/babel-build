#!/bin/bash -e

# Move all source files to .tmp so css files move also
cp -R src .tmp

# Run a full typescript build
npm run build:dist

# Clear out TS and TSX files
rm -rf .tmp/**/*.{ts,tsx}

# Run babel mostly to generate css modules
babel -d .tmp .tmp

# Move all the things to dist so the .d.ts files move also
cp -R .tmp dist

# Clean up
rm -rf .tmp
