"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
jest.mock("../utils/getFilePaths", function () { return ({ default: jest.fn(function () { return ["app/modules/home/controller.ts"]; }) }); });
var getFilePaths_1 = require("../utils/getFilePaths");
var controllerRegistry_1 = require("../classes/controllerRegistry");
var TestController = require("./fixtures/controller");
describe("controller registry", function () {
    var req;
    beforeEach(function () {
        req = jest.fn(function () { return TestController; });
    });
    afterEach(function () {
        req.mockReset();
    });
    it("should register controllers in dev environment", function () {
        var registry = new controllerRegistry_1.default(req, "/dev/my-app", false);
        var controllers = registry.register();
        expect(controllers.length).toBeTruthy();
        expect(getFilePaths_1.default).toHaveBeenCalledWith("app/modules/**/*controller*(.js|.ts)");
        expect(controllers[0].routes["GET /show-stuff"]).toBe("show");
    });
    it("should register controllers in production environment", function () {
        var registry = new controllerRegistry_1.default(req, "/dev/my-app", true);
        var controllers = registry.register();
        expect(getFilePaths_1.default).toHaveBeenCalledWith("dist/modules/**/*controller*(.js|.ts)");
    });
});
